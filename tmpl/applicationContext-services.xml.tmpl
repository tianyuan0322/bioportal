<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd">

	<bean id="sessionFactory"
		class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
		<property name="dataSource">
			<ref bean="dataSource" />
		</property>
		<property name="hibernateProperties">
			<props>
				<prop key="hibernate.dialect">
					org.hibernate.dialect.SQLServerDialect
				</prop>
				<prop key="hibernate.show_sql">false</prop>
				<prop key="hibernate.use_outer_join">false</prop>
			</props>
		</property>
		<property name="mappingResources">
			<list>
				<value>
					org/ncbo/stanford/domain/custom/NcboOntology.hbm.xml
				</value>
				<value>
					org/ncbo/stanford/domain/custom/NcboOntologyQuery.hbm.xml
				</value>
				<value>
					org/ncbo/stanford/domain/custom/NcboTypeDef.hbm.xml
				</value>
				<value>
					org/ncbo/stanford/domain/generated/NcboOntologyVersion.hbm.xml
				</value>
				<value>
					org/ncbo/stanford/domain/generated/NcboOntologyFile.hbm.xml
				</value>
				<value>
					org/ncbo/stanford/domain/generated/NcboOntologyMetadata.hbm.xml
				</value>
				<value>
					org/ncbo/stanford/domain/generated/NcboUser.hbm.xml
				</value>
				<value>
					org/ncbo/stanford/domain/generated/NcboOntologyCategory.hbm.xml
				</value>
				<value>
					org/ncbo/stanford/domain/generated/NcboOntologyAdditionalMetadata.hbm.xml
				</value>
				<value>
					org/ncbo/stanford/domain/generated/NcboUserRole.hbm.xml
				</value>
				<value>
					org/ncbo/stanford/domain/generated/NcboLAdditionalMetadata.hbm.xml
				</value>
				<value>
					org/ncbo/stanford/domain/generated/NcboLCategory.hbm.xml
				</value>
				<value>
					org/ncbo/stanford/domain/generated/NcboLRole.hbm.xml
				</value>
				<value>
					org/ncbo/stanford/domain/generated/NcboSeqOntologyId.hbm.xml
				</value>
			</list>
		</property>
	</bean>

	<bean id="jdbcExceptionTranslator"
		class="org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator">
		<property name="dataSource">
			<ref bean="dataSource" />
		</property>
	</bean>

	<!-- We are using HibernateTemplate for 90% to 95% or so of database access.
		The JdbcTemplate is for when we can't use Hibernate. 
		Don't use JDBC directly! Use the JdbcTemplate as it handles JDBC cleanup.-->
	<bean id="jdbcTemplate"
		class="org.springframework.jdbc.core.JdbcTemplate">
		<property name="dataSource">
			<ref bean="dataSource" />
		</property>
	</bean>

	<bean id="hibernateTemplate"
		class="org.springframework.orm.hibernate3.HibernateTemplate">
		<property name="sessionFactory">
			<ref bean="sessionFactory" />
		</property>
		<property name="jdbcExceptionTranslator">
			<ref bean="jdbcExceptionTranslator" />
		</property>
	</bean>

	<!-- This is the base definition for all Hibernate based DAOs -->
	<bean id="hibernateDaoSupport"
		class="org.springframework.orm.hibernate3.support.HibernateDaoSupport"
		abstract="true">
		<property name="sessionFactory">
			<ref bean="sessionFactory" />
		</property>
		<!-- You could use the configured Hibernate template or create
			a new mapping that uses a configured hibernate template. 
			HibernateDaoSupport creates a HibernateTempalte with the default settings.
		-->
		<property name="hibernateTemplate">
			<ref bean="hibernateTemplate" />
		</property>
	</bean>

	<!-- Hibernate Transaction Manager Definition -->
	<bean id="transactionManager"
		class="org.springframework.orm.hibernate3.HibernateTransactionManager">
		<property name="sessionFactory">
			<ref bean="sessionFactory" />
		</property>
	</bean>

	<!--  Adding annotation Driven for Transcation management -->
	<!-- enable the configuration of transactional behavior based on annotations -->
	<tx:annotation-driven transaction-manager="transactionManager" />

	<!--  Custom DAOs begin here. Please remove the autogenerated
		DAO bean declaration if you have created a custom DAO 
		that extends the orginial DAO -->
	<bean id="NcboOntologyCategoryDAO"
		class="org.ncbo.stanford.domain.custom.dao.CustomNcboOntologyCategoryDAO">
		<property name="hibernateTemplate">
			<ref bean="hibernateTemplate" />
		</property>
	</bean>

	<bean id="NcboOntologyAdditionalMetadataDAO"
		class="org.ncbo.stanford.domain.custom.dao.CustomNcboOntologyAdditionalMetadataDAO">
		<property name="hibernateTemplate">
			<ref bean="hibernateTemplate" />
		</property>
	</bean>

	<bean id="NcboOntologyMetadataDAO"
		class="org.ncbo.stanford.domain.custom.dao.CustomNcboOntologyMetadataDAO">
		<property name="hibernateTemplate">
			<ref bean="hibernateTemplate" />
		</property>
	</bean>

	<bean id="NcboOntologyVersionDAO"
		class="org.ncbo.stanford.domain.custom.dao.CustomNcboOntologyVersionDAO">
		<property name="hibernateTemplate">
			<ref bean="hibernateTemplate" />
		</property>
	</bean>

	<bean id="NcboOntologyFileDAO"
		class="org.ncbo.stanford.domain.custom.dao.CustomNcboOntologyFileDAO">
		<property name="hibernateTemplate">
			<ref bean="hibernateTemplate" />
		</property>
	</bean>

	<bean id="NcboUserRoleDAO"
		class="org.ncbo.stanford.domain.custom.dao.CustomNcboUserRoleDAO">
		<property name="hibernateTemplate">
			<ref bean="hibernateTemplate" />
		</property>
	</bean>

	<bean id="NcboUserDAO"
		class="org.ncbo.stanford.domain.custom.dao.CustomNcboUserDAO">
		<property name="hibernateTemplate">
			<ref bean="hibernateTemplate" />
		</property>
	</bean>

	<bean id="NcboLRoleDAO"
		class="org.ncbo.stanford.domain.custom.dao.CustomNcboLRoleDAO">
		<property name="hibernateTemplate">
			<ref bean="hibernateTemplate" />
		</property>
	</bean>

	<bean id="NcboLAdditionalMetadataDAO"
		class="org.ncbo.stanford.domain.custom.dao.CustomNcboLAdditionalMetadataDAO">
		<property name="hibernateTemplate">
			<ref bean="hibernateTemplate" />
		</property>
	</bean>

	<bean id="NcboLCategoryDAO"
		class="org.ncbo.stanford.domain.custom.dao.CustomNcboLCategoryDAO">
		<property name="hibernateTemplate">
			<ref bean="hibernateTemplate" />
		</property>
	</bean>
	
	<bean id="NcboSeqOntologyIdDAO"
		class="org.ncbo.stanford.domain.generated.NcboSeqOntologyIdDAO">
		<property name="hibernateTemplate">
			<ref bean="hibernateTemplate" />
		</property>
	</bean>

	<!-- Message bundle -->
	<bean id="messageBundleName" class="java.lang.String">
		<constructor-arg>
			<value>message</value>
		</constructor-arg>
	</bean>

	<bean id="messageUtils"
		class="org.ncbo.stanford.util.MessageUtils" >
		<constructor-arg ref="messageBundleName" index="0" />
	</bean>

	<!-- Application Services -->
	<bean id="userService" class="org.ncbo.stanford.service.user.impl.UserServiceImpl">
		<property name="ncboUserDAO">
			<ref bean="NcboUserDAO" />
		</property>	
	</bean>

	<bean id="ontologyService" class="org.ncbo.stanford.service.ontology.impl.OntologyServiceImpl">
		<property name="ncboOntologyVersionDAO">
			<ref bean="NcboOntologyVersionDAO" />
		</property>	
	</bean>
</beans>