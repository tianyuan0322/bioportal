<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:util="http://www.springframework.org/schema/util"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.0.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd">

	<!-- Wire all restlets -->
	<bean id="authenticationRestlet"
		class="org.ncbo.stanford.view.rest.authentication.AuthenticationRestlet">
		<property name="authenticationManager">
			<ref bean="authenticationManager" />
		</property>
		<property name="sessionService">
			<ref bean="sessionService" />
		</property>
		<property name="xmlSerializationService">
			<ref bean="xmlSerializationService" />
		</property>
	</bean>

	<bean id="ontologyRestlet"
		class="org.ncbo.stanford.view.rest.restlet.ontology.OntologyRestlet">
		<property name="ontologyService">
			<ref bean="ontologyService" />
		</property>
		<property name="xmlSerializationService">
			<ref bean="xmlSerializationService" />
		</property>
	</bean>
	
	<bean id="conceptRestlet"
		class="org.ncbo.stanford.view.rest.restlet.concept.ConceptRestlet">
		<property name="conceptService">
			<ref bean="conceptService" />
		</property>
	</bean>
	
	<bean id="pathRestlet"
		class="org.ncbo.stanford.view.rest.restlet.path.PathRestlet">
		<property name="conceptService">
			<ref bean="conceptService" />
		</property>
	</bean>
	
	<bean id="ontologiesRestlet"
		class="org.ncbo.stanford.view.rest.restlet.ontology.OntologiesRestlet">
		<property name="ontologyService">
			<ref bean="ontologyService" />
		</property>
		<property name="ontologyLoadProcessorService">
			<ref bean="ontologyLoadProcessorService" />
		</property>
		<property name="xmlSerializationService">
			<ref bean="xmlSerializationService" />
		</property>
	</bean>

	<bean id="usersRestlet"
		class="org.ncbo.stanford.view.rest.restlet.user.UsersRestlet">
		<property name="userService">
			<ref bean="userService" />
		</property>
		<property name="xmlSerializationService">
			<ref bean="xmlSerializationService" />
		</property>
	</bean>

	<bean id="userRestlet"
		class="org.ncbo.stanford.view.rest.restlet.user.UserRestlet">
		<property name="userService">
			<ref bean="userService" />
		</property>
		<property name="xmlSerializationService">
			<ref bean="xmlSerializationService" />
		</property>
	</bean>

	<!-- All mappings: -->
	<bean id="restManager"
		class="org.ncbo.stanford.view.rest.base.RestManager">
		<property name="resourceMappings">
			<bean class="java.util.HashMap">
				<constructor-arg>
					<map>
						<entry key="/auth">
							<ref local="authenticationRestlet" />
						</entry>
						<entry key="/ontologies">
							<ref local="ontologiesRestlet" />
						</entry>
						<entry key="/ontology/{ontology}">
							<ref local="ontologyRestlet" />
						</entry>
						<entry key="/concept/{ontology}/{concept}">
							<ref local="conceptRestlet" />
						</entry>
						<entry key="/users">
							<ref local="usersRestlet" />
						</entry>
						<entry key="/user/{user}">
							<ref local="userRestlet" />
						</entry>
						<entry key="/path/{ontologyVersionId}/{source}/{target}">
							<ref local="pathRestlet" />
						</entry>
					</map>
				</constructor-arg>
			</bean>
		</property>
	</bean>
</beans>